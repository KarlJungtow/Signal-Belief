{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}Treatment 4 — Assigned Consumption (Round {{ player.round_number }} of {{ C.NUM_ROUNDS }}){% endblock %}

{% block content %}
<p>
  In this treatment, your period-1 consumption <strong>c₁</strong> is <em>pre-assigned</em>.
  You will see the signal and then state your belief. There is <strong>no choice page</strong>.
</p>

<div class="card mb-3">
  <div class="card-body">
    <ul>
      <li>Role this round: <strong>{{ player.current_role }}</strong></li>
      <li>Assigned consumption: <strong>c₁ = {{ c1 }}</strong></li>
      <li>Current income: <strong>y₁ = {{ y1 }}</strong></li>
      <li>Price now: <strong>p₁ = {{ p1 }}</strong></li>
      <li>Income profile: <strong>x = {{ x }}</strong> (0.5 = decreasing, 1.5 = increasing)</li>
      <li>Future income is indexed: <code>y₂ = π · x · y₁</code></li>
      <li>So, if π = 1 ⇒ y₂ = <strong>{{ y2_pi1 }}</strong>
    </ul>
  </div>
</div>

<div class="card mb-3">
  <div class="card-body">
    <p><strong>Utility reference (not feedback):</strong> u(c₁,c₂) = c₁ · c₂</p>
    <p>Utilities for integer c₁ (1–20) under both possible π values. “—” marks infeasible (c₂ &lt; 1).</p>
    <table class="table table-sm table-bordered align-middle">
      <thead>
        <tr>
          <th style="width:10%">c₁</th>
          <th>u at π = 0.5</th>
          <th>u at π = 1.5</th>
        </tr>
      </thead>
      <tbody>
        {% for row in table_rows %}
        <tr>
          <td>{{ row.c1 }}</td>
          <td>{% if row.infeasible05 %}—{% else %}{{ row.u05 }}{% endif %}</td>
          <td>{% if row.infeasible15 %}—{% else %}{{ row.u15 }}{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{{ next_button }}
{% endblock %}

